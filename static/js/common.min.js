/*
JS Document
◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇
◎ *@Description: javascript Obj 基类
◎ *@Author: 谭生虎       TanShenghu	TSH    
◎ *@Update: 2013-05-14
◎ *@Contact: ☎：13588428548		Email: tanshenghu@163.com	QQ：511568692
◎ *@AuthorNote: 请不要随便篡改文件内容。尊重他人劳动成果！谢谢...     谭生虎 注
◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇
*/
!function($,win){var tsh={},fnTsh={};tsh.clientWidth=function(){return document.documentElement.clientWidth},tsh.clientHeight=function(){return document.documentElement.clientHeight},tsh.scrollHeight=function(){return document.documentElement.scrollHeight||document.body.scrollHeight},tsh.scrollWidth=function(){return document.documentElement.scrollWidth||document.body.scrollWidth},tsh.scrollTop=function(){return document.documentElement.scrollTop||document.body.scrollTop},tsh.scrollLeft=function(){return document.documentElement.scrollLeft||document.body.scrollLeft},tsh.screenWH=function(a){var b=win.screen.width,c=win.screen.height;return"x"==a?b:"y"==a?c:b+"\xd7"+c},tsh.browserMsg=win.navigator.userAgent,tsh.browserAppName=navigator.appName,tsh.browserAppVersion=navigator.appVersion,tsh.isIE=/msie/gim.test(tsh.browserMsg),tsh.IEDocMode=document.documentMode,tsh.useBrowser=tsh.browserMsg.match(/msie 6./gim)?"IE6":tsh.browserMsg.match(/msie 7./gim)?"IE7":tsh.browserMsg.match(/msie 8./gim)?"IE8":tsh.browserMsg.match(/msie 9./gim)?"IE9":tsh.browserMsg.match(/msie 10./gim)?"IE10":tsh.browserMsg.match(/msie 11./gim)?"IE11":tsh.browserMsg.match(/firefox/gim)?"firefox":"webkit",tsh.setCookies=function(a,b){var e,c="",d=arguments[2];c=a+"="+escape(b),void 0!=d&&(d=parseFloat(d),e=new Date,e.setDate(e.getDate()+d),c=c+"; expires="+e.toGMTString()),document.cookie=c+"; path=/"},tsh.getCookies=function(a){var b=document.cookie;CookArr=b.split("; ");for(var c in CookArr)if(CookArr[c].split("=")[0]==a)return unescape(CookArr[c].split("=")[1])},tsh.delCookies=function(a){var c,b="";c=new Date("1970/01/05"),c.setDate(c.getDate()),document.cookie=a+"="+b+"; expires="+c.toGMTString()+"; path=/"},tsh.log=function(a,b){b||(b=a,a=void 0),console&&console.log&&console.log("%c%s",a||"",b)},tsh.remark=function(key){var key=key?eval("this."+key):this,result="",length=0,fnlen=0;key||this.log("\u8be5\u5bf9\u8c61\u4e0d\u5b58\u5728\uff01");for(var i in key)length++,"function"==typeof key[i]?(fnlen++,this.log("color:red","function => "+i)):isNaN(key[i])?this.log("color:green","number => "+i):this.log(typeof key[i]+" => "+i);this.log("\u5171\u67e5\u627e\u5230 "+length+" \u4e2a\u5bf9\u8c61\uff0c\u5176\u4e2d\u65b9\u6cd5\u5bf9\u8c61 "+fnlen+" \u4e2a")},tsh.remark.demo=function(a){if(a){tsh.remark.key=a,$("#tsh_js_demo").remove();var b=document.createElement("script");b.id="tsh_js_demo",b.setAttribute("onerror",'alert("api\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u4f5c\u8005-TanShenghu")'),b.src="http://git.oschina.net/tanshenghu/myweb/raw/master/static/js/common_demo.js?rand=js"+(new Date).getTime(),document.body.appendChild(b)}},tsh.picNum=function(a,b){var c="";if(a&&b&&!isNaN(a)){a+="";var d=a.split("");for(var e in d)c+='<img src="'+b+d[e]+'.gif" class="middle" />'}return c},tsh.getFormField=function(a){function g(a){var b=a;return a instanceof jQuery||(b=$(b)),b}a instanceof Object||this.log("parameter "+a+" error");var b=g(a.form),c=a.selector?g(a.selector):!1,d="way"in a?a.way:!0,e=null,f={},h=function(a){return $("<div/>").text(a).html()},i=function(b){return a.Encode&&(b=a.Encode(b)),b};if(e=c&&d?b.find(c):c&&!d?b.find("input[name],textarea[name]").not(c):b.find("input[name],textarea[name],select[name]"),e.each(function(a,b){var c=$(b),d=c.attr("name"),e=c.attr("type")&&c.attr("type").toLowerCase();if(d&&e&&"radio"===e)c.prop("checked")&&(f[d]=h(i(c.val())));else if(d&&e&&"checkbox"===e){if(c.prop("checked"))if(f[d])f[d].push(h(i(c.val())));else{var g=[h(i(c.val()))];f[d]=g}}else d&&(f[d]=h(i(c.val())))}),a.split)for(var j in f)f[j]instanceof Array&&(f[j]=f[j].join(a.split));return f},tsh.getFormField.getCheckboxVal=function(a,b){var c={},d=[],e=arguments[2];return a=$(a),a.find('[name="'+b+'"]').each(function(a,b){var c=$(b),e=c.attr("type")&&c.attr("type").toLowerCase();!e||"radio"!==e&&"checkbox"!==e?c.val()&&d.push($(b).val()):c.prop("checked")&&d.push($(b).val())}),c[b]=e?d.join(e):d,c},tsh.getFormField.getLineVals=function(a){a=$(a);var b=[];return a.each(function(){var a={};$(this).find("[name]").each(function(b,c){var d=$(c),e=d.prop("nodeName").toLowerCase();a[d.attr("name")]="input"==e||"textarea"==e||"select"==e?d.val():d.text()}),b.push(a)}),b},tsh.checkAll=function(a,b){a=$(a),b=$(b);var c=a.prop("nodeName")&&a.prop("nodeName").toLowerCase(),d="input"==c?"change":"click";a.on(d,function(){"input"==c?a.prop("checked")?b.prop("checked",!0):b.prop("checked",!1):"\u5168\u9009"==a.text()?(b.prop("checked",!0),a.text("\u4e0d\u5168\u9009")):(b.prop("checked",!1),a.text("\u5168\u9009"))})},tsh.copyerPic=function(a,b){a=$(a),a.find("img").each(function(){$(this).width()>=b&&$(this).width(b)})},tsh.allHeight=function(a,b){a=$(a);var c=arguments[2],d=0;c?(c=parseFloat(c),a.height(c)):(a.each(function(a,c){b&&$(c).css("height","auto"),$(c).height()>d&&(d=$(c).height())}),a.height(d))},tsh.getFileType=function(a){return"string"==typeof a?a.match(/\..+$/g)[0]:void 0},tsh.videoPlay=function(a){var b=$(a.box),c=a.swf,d=a.file,e=a.width||250,f=a.height||200,g="",h=this.getFileType(d);g=".wmv"==h?'<embed width="'+parseFloat(e)+'" height="'+parseFloat(f)+'" autostart="1" loop="false" type="video/x-ms-wmv" src="'+d+'">':".flv"==h?c&&d?'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,19,0" width="'+parseFloat(e)+'" height="'+parseFloat(f)+'"><param name="movie" value="'+c+'" /><param name="quality" value="high" /><param name="wmode" value="opaque" /><param name="allowFullScreen" value="true" /><param name="FlashVars" value="vcastr_file='+d+'" /><embed src="'+c+'" allowfullscreen="true" flashvars="vcastr_file='+d+'" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="'+parseFloat(e)+'" height="'+parseFloat(f)+'"></embed></object>':"fail! File not found...":'<b style="color:red">\u89c6\u9891\u672a\u80fd\u6b63\u5e38\u64ad\u653e\uff0c\u8bf7\u68c0\u67e5\u89c6\u9891\u683c\u5f0f\u7c7b\u578b\uff0c\u4ee5\u53ca\u8c03\u7528\u8be5\u65b9\u6cd5\u7684API</b>',b.html(g)},tsh.placeholder=function(){var a=~~$.tsh.usebrowser.replace("IE","");a>0&&($.tsh.IEDocMode<10||"undefined"===$.tsh.IEDocMode)&&$(":text[placeholder],textarea[placeholder]").each(function(a){var c=$(a),d=$('<label class="placeholder" style="position:absolute;">'+c.attr("placeholder")+"</label>");c.parent().css("position","relative"),c.after(d),d.on("click",function(){$(this).hide().prev(":text,textarea").focus()}),c.on("focus",function(){$(this).next("label:visible")&&d.hide()}).on("blur",function(){$(this).val().trim()||d.show()})})},tsh.customCheckbox=function(){var a=~~$.tsh.usebrowser.replace("IE","");a>0&&($.tsh.IEDocMode<10||"undefined"===$.tsh.IEDocMode)&&$(".custom-checkbox").on("change",function(){$(this).prop("checked")&&$(this).parent().addClass("checked")})},tsh.currentMenu=function(a,b){return b="number"!=typeof b?parseInt(b):b,"number"!=typeof b?!1:($(a).eq(b).addClass("current").siblings(a).removeClass("current"),void 0)},tsh.emptyEle=function(a){var b=$(a),c=arguments[1]||".jq-empty";b.find(c).each(function(a,b){var c=$(b);"input"===c.prop("nodeName").toLowerCase()||"textarea"===c.prop("nodeName").toLowerCase()?c.val(""):"select"===c.prop("nodeName").toLowerCase()?c.find(":selected").prop("selected",!1):c.html("")})},tsh.dropDown=function(a){a=a?$(a):$(".dropdownbox"),a.on("mousedown",function(b){var b=b||event,c=$(this);a.not(c).find(".downcontent").hide(),c.find(".downcontent a").length&&(c.find(".downcontent").slideDown("fast"),b.stopPropagation())}).find(".downcontent").on("click","a",function(){var b=$(this),c=b.closest(".dropdownbox"),d=c.children(".cinput"),e=c.data("dropdown");"input"===d.prop("nodeName").toLowerCase()?d.val(b.html()).attr("key",b.attr("key")||""):d.text(b.html()).attr("key",b.attr("key")||""),b.parent().slideUp("fast"),e&&e.callback&&"function"==typeof e.callback&&e.callback.apply(this,[])}).prevAll(":text").prop("readonly",!0),$(document).on("mousedown",function(){a.find(".downcontent").hide()})},tsh.popupBox=function(a){var b=$(a.hand),c=$(a.box),d=a.zindex||1e3,e=0,f=0,g=parseInt(a.width),h=parseInt(a.height),i=0,j=0,k=a.callback;if(!c.length)return this.log("color:red","error:not "+a.box),void 0;"body"!=c.parent().prop("nodeName").toLowerCase()&&$("body").append(c),a.width||(c.css("display","inline"),g=c.width()),a.height||(c.css("display","inline"),h=c.height());var l=$("#coverPop").length?$("#coverPop"):$('<div id="coverPop"></div>'),m=function(){e=document.documentElement.clientWidth,f=document.documentElement.clientHeight,i=$(document).scrollTop()||0,j=$(document).scrollLeft()||0;var a=0>.5*(e-g)?0:.5*(e-g)>e-g?e-g:.5*(e-g),b=0>.5*(f-h)?0:.5*(f-h)>f-h?f-h:.5*(f-h),c={position:"absolute","z-index":d,display:"none",left:a+j,"background-color":"white",top:b+i},k=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);return l.css({position:"absolute","z-index":d-1,left:"0",top:"0",width:"100%",display:"none",background:"black",opacity:"0.5",height:k}),c},n=m();n.width=a.width?a.width:"auto",n.height=a.height?a.height:"auto",c.css(n).before(l),b.on("click",function(){var a=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);c.css(m()),l.height(a).fadeIn(),c.fadeIn(),"function"==typeof k&&k.apply(this,[c])}),c.find(".closeMe").on("click",function(){l.fadeOut("fast"),c.fadeOut("fast")})},tsh.getUrlParam=function(){var a={},b=arguments[0]?arguments[0]+"".substring(arguments[0]+"".indexOf("?")):document.location.search;b=b.ltrim();for(var c=b.split("&"),d=0,e=c.length;e>d;d++){var f=c[d].split("=");a[f[0]]=f[1]}return a},tsh.checkTab=function(a){var b=a.hand,c=a.box,d=a.evt||"click",e=a.callback;$(b).on(d,function(){var a=$(this),d=a.index(b);a.addClass("current").siblings(b).removeClass("current"),$(c).eq(d).show().siblings(c).hide(),"function"==typeof e&&e.apply(this,[])})},$.tsh=tsh,fnTsh.common={},fnTsh.common.gridsort={sort:function(a,b,c){this.srt=c||"desc",this.idx=parseInt(b),this.tbody=$(a),this.contrast()},contrast:function(){var a=this,b=[],c=[];this.tbody.find("tr").each(function(d,e){b.push(e);var f=$(e).children().eq(a.idx);c.push(f.text())}),c.sort(function(b,c){return b=parseFloat(a.isDate(b)),c=parseFloat(a.isDate(c)),"asc"===a.srt?c>b?-1:1:b>c?-1:1});var d=a.newsortobj(b,c);a.tbody.empty();for(var e=0,f=d.length;f>e;e++)a.tbody.append(d[e])},isDate:function(a){var b=/\d+\-\d+|\d+\/\d+|\d+\u5e74\d+/g;return b.test(a)&&(a=a.replace(/-|\//g,"")),a},newsortobj:function(a,b){for(var c=this,d={length:0},e=0,f=b.length;f>e;e++)for(var g=b[e],h=0,i=a.length;i>h;h++)$(a[h]).children().eq(c.idx).text()==g&&(d[d.length]=$(a[h]),d.length+=1);return d}},"".trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")}),String.prototype.rtrim=function(a){var b="";if(a){var c=this.lastIndexOf(a);b=this.substring(0,0>c?this.length:c)+(0>c?"":this.substring(c+1))}else b=this.replace(/.$/gm,"");return b},String.prototype.ltrim=function(a){var b="";if(a){var c=this.indexOf(a);b=this.substring(0,0>c?this.length:c)+(0>c?"":this.substring(c+1))}else b=this.replace(/^./gm,"");return b},Array.prototype.delVal=function(a,b){var c=!1;for(var d in this)this[d]!==a||c||(this.splice(d,1),b||(c=!0));return this},Array.prototype.clearRepeat=function(){for(var a={},b=[],c=0,d=this.length;d>c;c++){var e=typeof this[c]+this[c];void 0===a[e]&&(b.push(this[c]),a[e]="yes")}return b},Array.prototype.toObject=function(){var a={},b=Array.prototype.push;return b.apply(a,this),a},fnTsh.common.ObjectToArray=function(a){var b=Array.prototype.slice;return void 0===this.length?!1:b.call(a,0)},Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},win.getComputedStyle&&"function"==typeof win.getComputedStyle||(win.getComputedStyle=function(a){var b=a.nodeName?a:a.get(0);return b.currentStyle?b.currentStyle:getComputedStyle(b,null)}),win.common=fnTsh}(jQuery,window);