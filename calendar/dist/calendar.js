define("tanshenghu/calendar/1.0.0/calendar",[],{handler:{getId:function(a){return document.getElementById(a)},getele:function(a){return document.getElementsByTagName(a)},createEle:function(a){return document.createElement(a)},grand:function(a){var b;return b=0===a%4&&0!==a%100?!0:0===a%400?!0:!1},getDayCount:function(a,b){var c=this,d=0;switch(b){case 1:d=31;break;case 2:d=function(){return c.grand(a)?29:28}();break;case 3:d=31;break;case 5:d=31;break;case 7:d=31;break;case 8:d=31;break;case 10:d=31;break;case 12:d=31;break;default:d=30}return d}},init:function(a,b){return this.cache.popBox=this.handler.getId(a),this.callback=b,this.dataTable={},this.dataTable.prevMonth={},this.dataTable.nextMonth={},this.createEle(),this.dataTable},cache:{},createEle:function(){var a=this,b=a.cache;a.createEle.adds=function(b,c,d){for(var e=document.createDocumentFragment(),f=0;c>f;f++){var g=a.handler.createEle(b);"function"==typeof d&&d.apply(g,[f]),e.appendChild(g)}return e};var c=a.createEle.adds,d=a.handler.createEle("div"),e=a.handler.createEle("label"),f=a.handler.createEle("span"),g=a.handler.createEle("label");d.className="titlebox",e.className="prevBtn",e.innerHTML="&lt;",e.title="上个月",f.className="curDate",g.className="nextBtn",g.innerHTML="&gt;",g.title="下个月",d.appendChild(e),d.appendChild(f),d.appendChild(g),b.popBox.appendChild(d);var h=a.handler.createEle("table"),i=a.handler.createEle("thead"),j=["日","一","二","三","四","五","六"],k=c("th",7,function(a){(0==a||6==a)&&(this.className="rest"),this.innerHTML=j[a]}),l=a.handler.createEle("tbody");i.appendChild(k),h.appendChild(i),h.appendChild(l),b.popBox.appendChild(h),b.titleBox=d,b.prevBtn=e,b.curDate=f,b.nextBtn=g,b.table=h,b.thead=i,b.tbody=l,a.createDate(new Date),a.evt()},createDate:function(a){a.setDate(1);var b=this,c=b.createEle.adds,d=b.cache,e=a.getFullYear(),f=a.getMonth()+1,g=d.tbody.getElementsByTagName("tr");if(0!==g.length)for(var h=0,i=g.length;i>h;h++)d.tbody.removeChild(g[0]);var j=function(a){var g=new Date,h=g.getFullYear(),i=g.getMonth()+1,g=g.getDate();d.curDate.innerHTML=e+"年"+f+"月",d.curDate.curyear=e,d.curDate.curmonth=f;var j=a.getDay(),k=b.handler.getDayCount(e,f),l=b.handler.getDayCount(e,f-1),m=!1,n=0,o=0===(j+k)%7?(j+k)/7:parseInt((j+k)/7)+1,p=c("tr",o,function(a){this.appendChild(c("td",7,function(c){var d=b.handler.createEle("div");d.className="day_box";var o=7*a+c+1-j;if(0===a&&0!==j&&j>c&&(d.innerHTML='<span class="dayNO">'+(l-j+1+c)+"</span>",this.className="no-Month",b.dataTable.prevMonth[c]=this,b.dataTable.prevMonth.length=c+1),e==h&&f==i&&o===g&&(this.className="today"),m){var p=o;p>k?(n++,p=n,this.className="no-Month",b.dataTable.nextMonth[n-1]=this,b.dataTable.nextMonth.length=n):(b.dataTable[b.dataTable.length]=this,b.dataTable.length++),d.innerHTML='<span class="dayNO">'+p+"</span>"}0===a&&c===j&&(d.innerHTML='<span class="dayNO">1</span>',b.dataTable[0]=this,b.dataTable.total=k,b.dataTable.length=1,m=!0),this.appendChild(d)}))});d.tbody.appendChild(p),"function"==typeof b.callback&&b.callback.apply(b.dataTable,[d.popBox,d.titleBox,d.table])};j(a)},evt:function(){var a=this,b=a.cache,c=function(c){var d=b.curDate.curyear,e=b.curDate.curmonth;e=c===!0?e-2:e;var f=new Date;f.setFullYear(d),f.setMonth(e),a.createDate(f)};b.prevBtn.onclick=function(){c(!0)},b.nextBtn.onclick=function(){c(!1)}}});
